{"ast":null,"code":"import { supabase } from './supabaseClient';\nexport const uploadFile = async file => {\n  try {\n    const fileName = `${Date.now()}-${file.name}`;\n    const {\n      data: storageData,\n      error: storageError\n    } = await supabase.storage.from('srt-files').upload(fileName, file);\n    if (storageError) throw storageError;\n    const {\n      data: fileData,\n      error: dbError\n    } = await supabase.from('files').insert([{\n      name: file.name,\n      storage_path: storageData.path,\n      size: file.size,\n      created_at: new Date()\n    }]).select();\n    if (dbError) throw dbError;\n    return fileData[0];\n  } catch (error) {\n    console.error('שגיאה בהעלאת הקובץ:', error.message);\n    throw error;\n  }\n};\nexport const getFiles = async () => {\n  try {\n    const {\n      data,\n      error\n    } = await supabase.from('files').select('*').order('created_at', {\n      ascending: false\n    });\n    if (error) throw error;\n    return data;\n  } catch (error) {\n    console.error('שגיאה בקבלת הקבצים:', error.message);\n    throw error;\n  }\n};","map":{"version":3,"names":["supabase","uploadFile","file","fileName","Date","now","name","data","storageData","error","storageError","storage","from","upload","fileData","dbError","insert","storage_path","path","size","created_at","select","console","message","getFiles","order","ascending"],"sources":["C:/Users/Liran/.cursor-tutor/srt-translator/src/client/index.js"],"sourcesContent":["import { supabase } from './supabaseClient'\r\n\r\nexport const uploadFile = async (file) => {\r\n  try {\r\n    const fileName = `${Date.now()}-${file.name}`\r\n    const { data: storageData, error: storageError } = await supabase.storage\r\n      .from('srt-files')\r\n      .upload(fileName, file)\r\n    \r\n    if (storageError) throw storageError\r\n\r\n    const { data: fileData, error: dbError } = await supabase\r\n      .from('files')\r\n      .insert([\r\n        { \r\n          name: file.name,\r\n          storage_path: storageData.path,\r\n          size: file.size,\r\n          created_at: new Date()\r\n        }\r\n      ])\r\n      .select()\r\n    \r\n    if (dbError) throw dbError\r\n    \r\n    return fileData[0]\r\n  } catch (error) {\r\n    console.error('שגיאה בהעלאת הקובץ:', error.message)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport const getFiles = async () => {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('files')\r\n      .select('*')\r\n      .order('created_at', { ascending: false })\r\n    \r\n    if (error) throw error\r\n    return data\r\n  } catch (error) {\r\n    console.error('שגיאה בקבלת הקבצים:', error.message)\r\n    throw error\r\n  }\r\n} "],"mappings":"AAAA,SAASA,QAAQ,QAAQ,kBAAkB;AAE3C,OAAO,MAAMC,UAAU,GAAG,MAAOC,IAAI,IAAK;EACxC,IAAI;IACF,MAAMC,QAAQ,GAAG,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,IAAIH,IAAI,CAACI,IAAI,EAAE;IAC7C,MAAM;MAAEC,IAAI,EAAEC,WAAW;MAAEC,KAAK,EAAEC;IAAa,CAAC,GAAG,MAAMV,QAAQ,CAACW,OAAO,CACtEC,IAAI,CAAC,WAAW,CAAC,CACjBC,MAAM,CAACV,QAAQ,EAAED,IAAI,CAAC;IAEzB,IAAIQ,YAAY,EAAE,MAAMA,YAAY;IAEpC,MAAM;MAAEH,IAAI,EAAEO,QAAQ;MAAEL,KAAK,EAAEM;IAAQ,CAAC,GAAG,MAAMf,QAAQ,CACtDY,IAAI,CAAC,OAAO,CAAC,CACbI,MAAM,CAAC,CACN;MACEV,IAAI,EAAEJ,IAAI,CAACI,IAAI;MACfW,YAAY,EAAET,WAAW,CAACU,IAAI;MAC9BC,IAAI,EAAEjB,IAAI,CAACiB,IAAI;MACfC,UAAU,EAAE,IAAIhB,IAAI,CAAC;IACvB,CAAC,CACF,CAAC,CACDiB,MAAM,CAAC,CAAC;IAEX,IAAIN,OAAO,EAAE,MAAMA,OAAO;IAE1B,OAAOD,QAAQ,CAAC,CAAC,CAAC;EACpB,CAAC,CAAC,OAAOL,KAAK,EAAE;IACda,OAAO,CAACb,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAACc,OAAO,CAAC;IACnD,MAAMd,KAAK;EACb;AACF,CAAC;AAED,OAAO,MAAMe,QAAQ,GAAG,MAAAA,CAAA,KAAY;EAClC,IAAI;IACF,MAAM;MAAEjB,IAAI;MAAEE;IAAM,CAAC,GAAG,MAAMT,QAAQ,CACnCY,IAAI,CAAC,OAAO,CAAC,CACbS,MAAM,CAAC,GAAG,CAAC,CACXI,KAAK,CAAC,YAAY,EAAE;MAAEC,SAAS,EAAE;IAAM,CAAC,CAAC;IAE5C,IAAIjB,KAAK,EAAE,MAAMA,KAAK;IACtB,OAAOF,IAAI;EACb,CAAC,CAAC,OAAOE,KAAK,EAAE;IACda,OAAO,CAACb,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAACc,OAAO,CAAC;IACnD,MAAMd,KAAK;EACb;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}